{% comment %}
    TinyMCE requires you to have the resources referenced below installed under your STATIC_URL/tinymce.
    You can download them from tinymce.com, or include django-tinymce in your project.
{% endcomment %}
{% load wysiwyg static %}
<script type="text/javascript" src="{% static 'tinymce/tinymce.js' %}"></script>
<script type="text/javascript">
    // allow custom settings per editor ID:
    var django_wysiwyg_editor_configs = [];
    {% block django_wysiwyg_editor_config %}
    var django_wysiwyg_editor_config = {
        relative_urls: false,
        custom_undo_redo_levels: 10,
        plugins: 'paste,autoresize,autolink,emoticons,table,spellchecker,textcolor',
        strict_loading_mode: true,  // for pre 3.4 releases
        menu: {
            edit: {title: 'Edit', items: 'undo redo | cut copy paste pastetext | selectall'},
            insert: {title: 'Insert', items: 'link media | template hr'},
            view: {title: 'View', items: 'visualaid'},
            format: {title: 'Format', items: 'bold italic underline strikethrough superscript subscript | formats | removeformat'},
            table: {title: 'Table', items: 'inserttable tableprops deletetable | cell row column'},
            tools: {title: 'Tools', items: 'spellchecker code emoticons'}
        },
        //menubar: 'edit,table,tools',
        //toolbar: 'paste emoticons table spellchecker forecolor backcolor',
        width: '610px',
        theme: "modern"
    };
{% endblock %}

    var django_wysiwyg =
    {
        editors: {},

        enable: function django_wysiwyg_enable(editor_name, field_id, config)
        {
            if( !this.editors[editor_name] ) {
                if( !config ) {
                    config = django_wysiwyg_editor_configs[field_id] || django_wysiwyg_editor_config;
                }

                // Apply extra settings in local copy.
                var localconfig = {};
                tinyMCE.extend(localconfig, config);
                tinyMCE.extend(localconfig, {
                    mode: "exact",
                    elements: field_id,
                    setup: function(editor) {
                        django_wysiwyg.editors[editor_name] = editor;
                    }
                });

                tinyMCE.init(localconfig);
            }
        },

        disable: function django_wysiwyg_disable(editor_name)
        {
            var editor = this.editors[editor_name];
            if( editor ) {
                editor.save();
                editor.remove();
                this.editors[editor_name] = null;
            }
        },

        is_loaded: function django_wysiwyg_is_loaded()
        {
            return window.tinyMCE != null;
        }
    }
</script>
